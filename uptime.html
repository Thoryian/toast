<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#121212">
    <title>Toast Status</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        * { font-family: 'Inter', sans-serif; }
        .spin { animation: spin 1s linear infinite; }
        .bounce { animation: bounce 2s infinite; }
        .gradient { background: linear-gradient(90deg, #bb86fc, #03dac6, #bb86fc); background-size: 200% 200%; animation: flow 8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes flow { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
    </style>
</head>
<body class="bg-[#000000] text-gray-100 min-h-screen">
    <div class="fixed top-0 left-0 right-0 z-10 backdrop-blur-md bg-black/80 border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-3xl font-bold gradient bg-clip-text text-transparent flex items-center gap-2">
                    Toast Status <span class="bounce">:3</span>
                </h1>
                <div class="flex items-center gap-4">
                    <div id="lastCheck" class="text-sm text-gray-400 hidden md:block"></div>
                    <button onclick="refreshStatus()" class="bg-[#1e1e1e] p-3 rounded-full hover:bg-[#2a2a2a] transition-all duration-200 shadow-lg">
                        <i class="fas fa-sync-alt text-[#03dac6]"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <main class="pt-20 pb-8 px-4">
        <div class="max-w-7xl mx-auto">
            <div id="statusGrid" class="grid gap-6"></div>
        </div>
    </main>

    <footer class="fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-md border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-center items-center gap-6 text-gray-400">
                <a href="https://oncemiri.net" class="flex items-center gap-2 hover:text-[#bb86fc] transition-colors">
                    <i class="fas fa-code text-lg"></i>
                    <span>Developer</span>
                </a>
                <a href="https://github.com/thoryian/toast" class="flex items-center gap-2 hover:text-[#03dac6] transition-colors">
                    <i class="fab fa-github text-lg"></i>
                    <span>Source</span>
                </a>
            </div>
        </div>
    </footer>

    <script>
    const services = {
        Main: {
            Dis: 'https://dis.oncemiri.net/',
            MRN: 'https://mrn.oncemiri.net/'
        },
        Frontends: {
            Piped: 'https://piped.oncemiri.net/'
        },
        Falcon: {
            Falcon: 'https://falcon.oncemiri.net/',
            'Falcon CDN': 'https://falcon-cdn.oncemiri.net'
        },
        MEE8: {
            MEE8: 'https://mee8.net/'
        },
        'Friend/Other': {
            eYuM: {
                Main: 'https://eyum.dev/',
                Tetris: 'https://tetris.eyum.dev/'
            },
            Demon: {
                Main: 'https://demon.oncemiri.net/'
            },
            Lapis: {
                Main: 'https://lapis.oncemiri.net/'
            }
        }
    };

    const errorMessages = {
        1033: 'Argo Tunnel Error',
        522: 'Connection Timed Out',
        523: 'Origin Unreachable',
        524: 'Timeout Occurred',
        525: 'SSL Handshake Failed',
        1001: 'DNS Resolution Error'
    };

    async function checkStatus(url) {
        try {
            const response = await fetch(url, {
                method: 'HEAD',
                mode: 'cors',
                cache: 'no-store'
            });
            return response.ok 
                ? { status: 'up', message: 'Operational' }
                : { status: 'down', message: errorMessages[response.status] || 'Service Unavailable' };
        } catch {
            return { status: 'down', message: 'Connection Failed' };
        }
    }

    function createStatusCard(name, url, prefix = '') {
        const card = document.createElement('div');
        card.className = 'bg-[#121212] rounded-lg p-6 shadow-lg hover:shadow-2xl transition-all duration-200 border border-gray-800';
        
        const statusColors = {
            up: 'bg-[#4caf50]',
            down: 'bg-[#cf6679]',
            loading: 'bg-gray-500'
        };

        card.innerHTML = `
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <div class="w-3 h-3 rounded-full ${statusColors.loading}"></div>
                    <h3 class="text-lg font-semibold truncate">${prefix ? `${name}` : name}</h3>
                </div>
                <div class="text-sm text-gray-400">Checking...</div>
            </div>
            <div class="flex items-center gap-2 text-sm text-gray-400 break-all">
                <i class="fas fa-link text-xs"></i>
                <a href="${url}" target="_blank" class="hover:text-[#03dac6] transition-colors">${url}</a>
            </div>
        `;

        const indicator = card.querySelector('.rounded-full');
        const status = card.querySelector('.text-sm:last-child');

        checkStatus(url).then(result => {
            indicator.className = `w-3 h-3 rounded-full ${statusColors[result.status]}`;
            status.textContent = result.message;
            status.className = `text-sm ${result.status === 'up' ? 'text-[#4caf50]' : 'text-[#cf6679]'}`;
        });

        return card;
    }

    function renderServices(data, container = document.getElementById('statusGrid'), prefix = '') {
        for (const [name, value] of Object.entries(data)) {
            if (typeof value === 'string') {
                container.appendChild(createStatusCard(name, value, prefix));
            } else {
                const section = document.createElement('div');
                section.className = 'space-y-4';
                
                const title = document.createElement('h2');
                title.className = 'text-2xl font-bold text-[#03dac6] mb-4';
                title.textContent = `${name}`;
                
                section.appendChild(title);
                container.appendChild(section);
                renderServices(value, section, name);
            }
        }
    }

    function updateLastChecked() {
        document.getElementById('lastCheck').textContent = 
            `Last checked: ${new Date().toLocaleTimeString()}`;
    }

    function refreshStatus() {
        const button = document.querySelector('button i');
        button.classList.add('spin');
        document.getElementById('statusGrid').innerHTML = '';
        renderServices(services);
        updateLastChecked();
        setTimeout(() => button.classList.remove('spin'), 500);
    }

    renderServices(services);
    updateLastChecked();
    setInterval(refreshStatus, 30000);
    </script>
</body>
</html>